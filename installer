#!/data/data/com.termux/files/usr/bin/bash

# Terminal Encryptor V1.1.2 - –õ–∞—É–Ω—á–µ—Ä
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

# –¶–≤–µ—Ç–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m'

# –ü—É—Ç–∏
INSTALL_DIR="$HOME/terminal-encryptor"
SCRIPT_NAME="terminal_encryptor.sh"
REPO_URL="https://github.com/gliderlol643-sketch/Terminal-Encryptor.git"
LAUNCHER_URL="https://raw.githubusercontent.com/gliderlol643-sketch/Terminal-Encryptor/main/launcher.sh"

# –ê–Ω–∏–º–∞—Ü–∏—è
spinner() {
    local pid=$!
    local delay=0.1
    local spinstr='|/-\'
    while [ "$(ps a | awk '{print $1}' | grep $pid)" ]; do
        local temp=${spinstr#?}
        printf " [%c]  " "$spinstr"
        local spinstr=$temp${spinstr%"$temp"}
        sleep $delay
        printf "\b\b\b\b\b\b"
    done
    printf "    \b\b\b\b"
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
check_updates() {
    echo -e "${CYAN}üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π...${NC}"
    
    if [ -d "$INSTALL_DIR/.git" ]; then
        cd "$INSTALL_DIR"
        git fetch origin main > /dev/null 2>&1 &
        spinner
        
        LOCAL_COMMIT=$(git rev-parse HEAD)
        REMOTE_COMMIT=$(git rev-parse origin/main 2>/dev/null)
        
        if [ "$LOCAL_COMMIT" != "$REMOTE_COMMIT" ] && [ ! -z "$REMOTE_COMMIT" ]; then
            echo -e "${YELLOW}üì¶ –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!${NC}"
            return 1
        else
            echo -e "${GREEN}‚úÖ –£ –≤–∞—Å –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è${NC}"
            return 0
        fi
    fi
    return 0
}

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∞—É–Ω—á–µ—Ä–∞
update_launcher() {
    echo -e "${CYAN}üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∞—É–Ω—á–µ—Ä–∞...${NC}"
    curl -s "$LAUNCHER_URL" > "$0.tmp" &
    spinner
    
    if [ $? -eq 0 ]; then
        chmod +x "$0.tmp"
        mv "$0.tmp" "$0"
        echo -e "${GREEN}‚úÖ –õ–∞—É–Ω—á–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω!${NC}"
        echo -e "${YELLOW}üì¢ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ª–∞—É–Ω—á–µ—Ä:${NC}"
        echo -e "${WHITE}  bash $0${NC}"
        exit 0
    else
        rm -f "$0.tmp"
        echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∞—É–Ω—á–µ—Ä–∞${NC}"
    fi
}

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
install_dependencies() {
    echo -e "${CYAN}üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...${NC}"
    
    pkg update -y > /dev/null 2>&1 &
    spinner
    
    local pkgs=("git" "jq" "openssl-tool" "curl" "wget" "python" "nano")
    
    for pkg in "${pkgs[@]}"; do
        if ! command -v $pkg &> /dev/null; then
            echo -e "${BLUE}‚¨áÔ∏è  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ $pkg...${NC}"
            pkg install $pkg -y > /dev/null 2>&1 &
            spinner
        fi
    done
    
    echo -e "${GREEN}‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã${NC}"
}

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
clone_repo() {
    if [ -d "$INSTALL_DIR" ]; then
        echo -e "${CYAN}üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Terminal Encryptor...${NC}"
        cd "$INSTALL_DIR"
        git pull origin main > /dev/null 2>&1 &
        spinner
        
        if [ $? -eq 0 ]; then
            echo -e "${GREEN}‚úÖ Terminal Encryptor –æ–±–Ω–æ–≤–ª–µ–Ω${NC}"
        else
            echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è${NC}"
            echo -e "${YELLOW}–ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏...${NC}"
            rm -rf "$INSTALL_DIR"
            git clone "$REPO_URL" "$INSTALL_DIR" > /dev/null 2>&1 &
            spinner
        fi
    else
        echo -e "${CYAN}üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Terminal Encryptor...${NC}"
        git clone "$REPO_URL" "$INSTALL_DIR" > /dev/null 2>&1 &
        spinner
        echo -e "${GREEN}‚úÖ Terminal Encryptor —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
    fi
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
setup_environment() {
    echo -e "${CYAN}‚öôÔ∏è  –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è...${NC}"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Å–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
    if [ ! -f "$INSTALL_DIR/$SCRIPT_NAME" ]; then
        # –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ –∏–∑ –ª–∞—É–Ω—á–µ—Ä–∞
        echo -e "${YELLOW}–°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞...${NC}"
        create_main_script
    fi
    
    # –î–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    chmod +x "$INSTALL_DIR/$SCRIPT_NAME" 2>/dev/null
    
    # –°–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫ –≤ /data/data/com.termux/files/usr/bin
    if [ ! -f "/data/data/com.termux/files/usr/bin/tencrypt" ]; then
        ln -sf "$INSTALL_DIR/$SCRIPT_NAME" /data/data/com.termux/files/usr/bin/tencrypt 2>/dev/null
        echo -e "${GREEN}‚úÖ –ö–æ–º–∞–Ω–¥–∞ 'tencrypt' –¥–æ–±–∞–≤–ª–µ–Ω–∞${NC}"
    fi
    
    # –°–æ–∑–¥–∞–µ–º alias –≤ .bashrc
    if ! grep -q "alias tencrypt=" "$HOME/.bashrc" 2>/dev/null; then
        echo "alias tencrypt='bash $INSTALL_DIR/$SCRIPT_NAME'" >> "$HOME/.bashrc"
        echo "alias terminal-encryptor='bash $INSTALL_DIR/$SCRIPT_NAME'" >> "$HOME/.bashrc"
        source "$HOME/.bashrc"
        echo -e "${GREEN}‚úÖ –ê–ª–∏–∞—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ .bashrc${NC}"
    fi
    
    echo -e "${GREEN}‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ${NC}"
}

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç)
create_main_script() {
    cat > "$INSTALL_DIR/$SCRIPT_NAME" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash

# Terminal Encryptor V1.1.2
# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç

# –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ –ª–∞—É–Ω—á–µ—Ä, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –ø–∞–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
if [ -f "$HOME/terminal-encryptor/terminal_encryptor.sh" ]; then
    cd "$HOME/terminal-encryptor"
    exec bash terminal_encryptor.sh "$@"
fi

# –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
echo "=========================================="
echo "  Terminal Encryptor V1.1.2"
echo "=========================================="
echo ""
echo "–î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è"
echo "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∞—É–Ω—á–µ—Ä:"
echo ""
echo "bash <(curl -s https://raw.githubusercontent.com/gliderlol643-sketch/Terminal-Encryptor/main/launcher.sh)"
echo ""
echo "–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:"
echo ""
echo "curl -s https://raw.githubusercontent.com/gliderlol643-sketch/Terminal-Encryptor/main/launcher.sh | bash"
echo ""
exit 1
EOF
}

# –ó–∞–ø—É—Å–∫ Terminal Encryptor
run_encryptor() {
    echo -e "${CYAN}üöÄ –ó–∞–ø—É—Å–∫ Terminal Encryptor...${NC}"
    echo -e "${PURPLE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    
    cd "$INSTALL_DIR"
    
    if [ -f "$SCRIPT_NAME" ]; then
        bash "$SCRIPT_NAME"
    else
        echo -e "${RED}‚ùå –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω${NC}"
        echo -e "${YELLOW}–ü–æ–ø—ã—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è...${NC}"
        create_main_script
        chmod +x "$SCRIPT_NAME"
        bash "$SCRIPT_NAME"
    fi
}

# –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä
show_banner() {
    clear
    echo -e "${CYAN}"
    echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó  ‚ïë"
    echo "‚ïë  ‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë  ‚ïë"
    echo "‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë  ‚ïë"
    echo "‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ïë"
    echo "‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë  ‚ïë"
    echo "‚ïë     ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù  ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ïë"
    echo "‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó ‚ïë"
    echo "‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïë"
    echo "‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó ‚ïë"
    echo "‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë ‚ïë"
    echo "‚ïë    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë                    Version 1.1.2                     ‚ïë"
    echo "‚ïë                 Author: Sketch Dev                  ‚ïë"
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    echo -e "${NC}"
}

# –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é
show_menu() {
    echo -e "${WHITE}"
    echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo "‚ïë         –ú–ï–ù–Æ –£–ü–†–ê–í–õ–ï–ù–ò–Ø                  ‚ïë"
    echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
    echo "‚ïë  1. üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å Terminal Encryptor     ‚ïë"
    echo "‚ïë  2. üì¶ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–û–±–Ω–æ–≤–∏—Ç—å              ‚ïë"
    echo "‚ïë  3. üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ª–∞—É–Ω—á–µ—Ä                 ‚ïë"
    echo "‚ïë  4. üõ†Ô∏è  –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å                  ‚ïë"
    echo "‚ïë  5. üìÅ –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞            ‚ïë"
    echo "‚ïë  6. ‚ùì –ü–æ–º–æ—â—å                           ‚ïë"
    echo "‚ïë  7. üö™ –í—ã—Ö–æ–¥                           ‚ïë"
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    echo -e "${NC}"
}

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
show_help() {
    echo -e "${CYAN}"
    echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo "‚ïë                 –°–ü–†–ê–í–ö–ê –ü–û –ö–û–ú–ê–ù–î–ê–ú                  ‚ïë"
    echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã:                   ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  ${WHITE}tencrypt${CYAN} - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞     ‚ïë"
    echo "‚ïë  ${WHITE}terminal-encryptor${CYAN} - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –∏–∑ –ª—é–±–æ–π –ø–∞–ø–∫–∏:                      ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  ${WHITE}tencrypt${CYAN}                                        ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:                                     ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïë  ${WHITE}curl -s https://bit.ly/tencrypt-launcher | bash${CYAN} ‚ïë"
    echo "‚ïë                                                      ‚ïë"
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    echo -e "${NC}"
    read -p "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è..."
}

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
reinstall() {
    echo -e "${YELLOW}‚ö†Ô∏è  –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å? [y/N]: ${NC}"
    read -r response
    if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
        echo -e "${CYAN}üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏...${NC}"
        rm -rf "$INSTALL_DIR"
        rm -f "/data/data/com.termux/files/usr/bin/tencrypt"
        sed -i '/alias tencrypt=/d' "$HOME/.bashrc" 2>/dev/null
        sed -i '/alias terminal-encryptor=/d' "$HOME/.bashrc" 2>/dev/null
        
        echo -e "${GREEN}‚úÖ –°—Ç–∞—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞${NC}"
        install_dependencies
        clone_repo
        setup_environment
        echo -e "${GREEN}‚úÖ –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
    fi
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ Termux
    if [ ! -d "/data/data/com.termux" ]; then
        echo -e "${RED}‚ùå –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è Termux!${NC}"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
    if ! ping -c 1 google.com > /dev/null 2>&1; then
        echo -e "${RED}‚ùå –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É!${NC}"
        exit 1
    fi
    
    show_banner
    
    # –ï—Å–ª–∏ –µ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã
    case "$1" in
        "install"|"update")
            install_dependencies
            clone_repo
            setup_environment
            run_encryptor
            exit 0
            ;;
        "run")
            if [ -d "$INSTALL_DIR" ]; then
                run_encryptor
            else
                echo -e "${RED}‚ùå Terminal Encryptor –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
                echo -e "${YELLOW}–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É...${NC}"
                install_dependencies
                clone_repo
                setup_environment
                run_encryptor
            fi
            exit 0
            ;;
        "help")
            show_help
            exit 0
            ;;
    esac
    
    # –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é
    while true; do
        show_menu
        echo ""
        echo -e "${YELLOW}–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 1.1.2${NC}"
        echo -e "${BLUE}–ü–∞–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: $INSTALL_DIR${NC}"
        echo ""
        read -p "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ [1-7]: " choice
        
        case $choice in
            1)
                if [ -d "$INSTALL_DIR" ]; then
                    run_encryptor
                else
                    echo -e "${YELLOW}Terminal Encryptor –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å? [y/N]: ${NC}"
                    read -r response
                    if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
                        install_dependencies
                        clone_repo
                        setup_environment
                        run_encryptor
                    fi
                fi
                ;;
            2)
                install_dependencies
                clone_repo
                setup_environment
                echo -e "${GREEN}‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!${NC}"
                echo -e "${YELLOW}–ó–∞–ø—É—Å—Ç–∏—Ç–µ Terminal Encryptor:${NC}"
                echo -e "${WHITE}  tencrypt${NC}"
                sleep 2
                ;;
            3)
                update_launcher
                ;;
            4)
                reinstall
                ;;
            5)
                if [ -d "$INSTALL_DIR" ]; then
                    cd "$INSTALL_DIR"
                    echo -e "${GREEN}üìÅ –û—Ç–∫—Ä—ã—Ç–∞ –ø–∞–ø–∫–∞: $INSTALL_DIR${NC}"
                    ls -la
                    echo ""
                    read -p "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è..."
                else
                    echo -e "${RED}‚ùå –ü–∞–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞${NC}"
                fi
                ;;
            6)
                show_help
                ;;
            7)
                echo -e "${GREEN}üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!${NC}"
                exit 0
                ;;
            *)
                echo -e "${RED}‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä${NC}"
                sleep 1
                ;;
        esac
    done
}

# –ó–∞–ø—É—Å–∫
main "$@"
